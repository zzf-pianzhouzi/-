{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createBlock as _createBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  style: {\n    \"margin-top\": \"10px\",\n    \"margin-bottom\": \"80px\"\n  }\n};\nconst _hoisted_2 = {\n  style: {\n    \"padding\": \"20px\",\n    \"color\": \"#888\"\n  }\n};\nconst _hoisted_3 = {\n  style: {\n    \"text-align\": \"right\",\n    \"padding\": \"10px\"\n  }\n};\n\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"留言\");\n\nconst _hoisted_5 = {\n  style: {\n    \"display\": \"flex\",\n    \"padding\": \"20px\"\n  }\n};\nconst _hoisted_6 = {\n  style: {\n    \"text-align\": \"center\",\n    \"flex\": \"1\"\n  }\n};\nconst _hoisted_7 = {\n  style: {\n    \"padding\": \"0 10px\",\n    \"flex\": \"5\"\n  }\n};\nconst _hoisted_8 = {\n  style: {\n    \"font-size\": \"14px\"\n  }\n};\nconst _hoisted_9 = {\n  style: {\n    \"padding\": \"10px 0\",\n    \"color\": \"#888\"\n  }\n};\n\nconst _hoisted_10 = /*#__PURE__*/_createTextVNode(\"删除\");\n\nconst _hoisted_11 = {\n  key: 0,\n  style: {\n    \"background-color\": \"#eee\",\n    \"padding\": \"10px\"\n  }\n};\nconst _hoisted_12 = {\n  style: {\n    \"color\": \"#888\",\n    \"font-size\": \"12px\"\n  }\n};\n\nconst _hoisted_13 = /*#__PURE__*/_createTextVNode(\"回复\");\n\nconst _hoisted_14 = /*#__PURE__*/_createTextVNode(\"取 消\");\n\nconst _hoisted_15 = /*#__PURE__*/_createTextVNode(\"确 定\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n\n  const _component_el_button = _resolveComponent(\"el-button\");\n\n  const _component_el_image = _resolveComponent(\"el-image\");\n\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n\n  const _component_el_form = _resolveComponent(\"el-form\");\n\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n\n  const _component_el_card = _resolveComponent(\"el-card\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_card, null, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", null, [_createVNode(_component_el_input, {\n      type: \"textarea\",\n      rows: 3,\n      modelValue: $data.entity.content,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.entity.content = $event)\n    }, null, 8\n    /* PROPS */\n    , [\"modelValue\"]), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $options.save\n    }, {\n      default: _withCtx(() => [_hoisted_4]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"onClick\"])])])]), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.messages, item => {\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_el_image, {\n        src: item.avatar,\n        style: {\n          \"width\": \"60px\",\n          \"height\": \"60px\",\n          \"border-radius\": \"50%\"\n        }\n      }, null, 8\n      /* PROPS */\n      , [\"src\"])]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", null, [_createElementVNode(\"b\", _hoisted_8, _toDisplayString(item.username), 1\n      /* TEXT */\n      )]), _createElementVNode(\"div\", _hoisted_9, [_createTextVNode(_toDisplayString(item.content) + \" \", 1\n      /* TEXT */\n      ), item.username === $data.user.username ? (_openBlock(), _createBlock(_component_el_button, {\n        key: 0,\n        type: \"text\",\n        size: \"mini\",\n        onClick: $event => $options.del(item.id)\n      }, {\n        default: _withCtx(() => [_hoisted_10]),\n        _: 2\n        /* DYNAMIC */\n\n      }, 1032\n      /* PROPS, DYNAMIC_SLOTS */\n      , [\"onClick\"])) : _createCommentVNode(\"v-if\", true)]), item.parentMessage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, _toDisplayString(item.username) + \"：\" + _toDisplayString(item.parentMessage.content), 1\n      /* TEXT */\n      )) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"span\", null, _toDisplayString(item.time), 1\n      /* TEXT */\n      ), _createVNode(_component_el_button, {\n        type: \"text\",\n        style: {\n          \"margin-left\": \"20px\"\n        },\n        onClick: $event => $options.reReply(item.id)\n      }, {\n        default: _withCtx(() => [_hoisted_13]),\n        _: 2\n        /* DYNAMIC */\n\n      }, 1032\n      /* PROPS, DYNAMIC_SLOTS */\n      , [\"onClick\"])])])]);\n    }), 256\n    /* UNKEYED_FRAGMENT */\n    )), _createVNode(_component_el_dialog, {\n      title: \"回复信息\",\n      modelValue: $data.dialogFormVisible,\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.dialogFormVisible = $event),\n      width: \"30%\"\n    }, {\n      footer: _withCtx(() => [_createVNode(_component_el_button, {\n        onClick: $options.cancel\n      }, {\n        default: _withCtx(() => [_hoisted_14]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"onClick\"]), _createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: $options.reply\n      }, {\n        default: _withCtx(() => [_hoisted_15]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"onClick\"])]),\n      default: _withCtx(() => [_createVNode(_component_el_form, {\n        model: $data.entity,\n        \"label-width\": \"80px\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_form_item, {\n          label: \"内容\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_input, {\n            modelValue: $data.entity.reply,\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.entity.reply = $event),\n            autocomplete: \"off\",\n            type: \"textarea\",\n            rows: 3\n          }, null, 8\n          /* PROPS */\n          , [\"modelValue\"])]),\n          _: 1\n          /* STABLE */\n\n        })]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"model\"])]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"modelValue\"])]),\n    _: 1\n    /* STABLE */\n\n  })]);\n}","map":{"version":3,"mappings":"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","names":["style","_createElementBlock","_createVNode","_component_el_card","_createElementVNode","_component_el_input","type","rows","$data","content","$event","_component_el_button","onClick","$options","_Fragment","_renderList","item","_component_el_image","src","avatar","_toDisplayString","username","_createBlock","size","id","parentMessage","time","_component_el_dialog","title","width","footer","_component_el_form","model","_component_el_form_item","label","reply","autocomplete"],"sourceRoot":"","sources":["D:\\Desktop\\springboot+vue\\springboot-vue-demo\\src\\views\\Message.vue"],"sourcesContent":["<template>\n  <div style=\"margin-top: 10px; margin-bottom: 80px\">\n    <el-card>\n      <div style=\"padding: 20px; color: #888\">\n        <div>\n          <el-input type=\"textarea\" :rows=\"3\" v-model=\"entity.content\"></el-input>\n          <div style=\"text-align: right; padding: 10px\"><el-button type=\"primary\" @click=\"save\">留言</el-button></div>\n        </div>\n      </div>\n\n      <div style=\"display: flex; padding: 20px\" v-for=\"item in messages\">\n        <div style=\"text-align: center; flex: 1\">\n          <el-image :src=\"item.avatar\" style=\"width: 60px; height: 60px; border-radius: 50%\"></el-image>\n        </div>\n        <div style=\"padding: 0 10px; flex: 5\">\n          <div><b style=\"font-size: 14px\">{{ item.username }}</b></div>\n          <div style=\"padding: 10px 0; color: #888\">\n            {{ item.content }}\n            <el-button type=\"text\" size=\"mini\" @click=\"del(item.id)\" v-if=\"item.username === user.username\">删除</el-button>\n          </div>\n          <div style=\"background-color: #eee; padding: 10px\" v-if=\"item.parentMessage\">{{ item.username }}：{{ item.parentMessage.content }}</div>\n          <div style=\"color: #888; font-size: 12px\">\n            <span>{{ item.time  }}</span>\n            <el-button type=\"text\" style=\"margin-left: 20px\" @click=\"reReply(item.id)\">回复</el-button>\n          </div>\n        </div>\n      </div>\n\n      <el-dialog title=\"回复信息\" v-model=\"dialogFormVisible\" width=\"30%\">\n        <el-form :model=\"entity\" label-width=\"80px\">\n          <el-form-item label=\"内容\">\n            <el-input v-model=\"entity.reply\" autocomplete=\"off\" type=\"textarea\" :rows=\"3\"></el-input>\n          </el-form-item>\n        </el-form>\n        <template #footer>\n          <el-button @click=\"cancel\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"reply\">确 定</el-button>\n        </template>\n      </el-dialog>\n    </el-card>\n\n\n  </div>\n</template>\n\n<script>\nimport request from \"@/utils/request\";\n\nexport default {\n  name: \"Message\",\n  data() {\n    return {\n      user: {},\n      messages: [],\n      dialogFormVisible: false,\n      isCollapse: false,\n      entity: {}\n    }\n  },\n  created() {\n    this.user = sessionStorage.getItem(\"user\") ? JSON.parse(sessionStorage.getItem(\"user\")) : {};\n    this.loadMessage();\n\n\n  },\n  methods: {\n    loadMessage() {\n      // 如果是留言的话，就写死=0\n      // 如果是 评论，则需要设置 当前被评论的模块的id作为foreignId\n      let foreignId = 0;\n      request.get(\"/message/foreign/\" + foreignId).then(res => {\n        this.messages = res.data;\n      })\n    },\n    cancel() {\n      this.dialogFormVisible = false;\n      this.entity = {};\n    },\n    reReply(id) {\n      this.dialogFormVisible = true;\n      this.entity.parentId = id;\n    },\n    reply() {\n      this.entity.content = this.entity.reply;\n      this.save();\n    },\n\n    save() {\n      if (!this.user.username) {\n        this.$message({\n          message: \"请登录\",\n          type: \"warning\"\n        });\n        return;\n      }\n      if (!this.entity.content) {\n        this.$message({\n          message: \"请填写内容\",\n          type: \"warning\"\n        });\n        return;\n      }\n      // 如果是评论的话，在 save的时候要注意设置 当前模块的id为 foreignId。也就是  entity.foreignId = 模块id\n      request.post(\"/message\", this.entity).then(res => {\n        if (res.code === '0') {\n          this.$message({\n            message: \"评论成功\",\n            type: \"success\"\n          });\n        } else {\n          this.$message({\n            message: res.msg,\n            type: \"error\"\n          });\n        }\n        this.entity = {}\n        this.loadMessage();\n        this.dialogFormVisible = false;\n      })\n    },\n    del(id) {\n      request.delete(\"/message/\" + id).then(res => {\n        this.$message({\n          message: \"删除成功\",\n          type: \"success\"\n        });\n        this.loadMessage()\n      })\n    }\n  }\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}